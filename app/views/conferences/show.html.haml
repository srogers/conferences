- title @conference.name
.row
  .col-md-12
    %h4
      = @conference.name + ','
      = @conference.date_span
    - if current_user
      .float-right
        - if current_user.attended? @conference
          %p
            = attendance_status_message(@conference)
            = link_to icon('far', 'trash-alt', class: 'fa-fw'), conference_user_path(@conference_user), :method => :delete, :style => "color: #F00", :data => { :confirm => 'Remove your association with this conference?' }, :post => true
        - else
          = simple_form_for @conference_user do |f|
            = f.input :conference_id, as: :hidden, input_html: { value: @conference.id }
            = f.input :user_id, as: :hidden, input_html: { value:current_user.id }
            = f.submit attendance_status_message(@conference)
    %p
      %b Organizer:
      = @conference.organizer&.name
    %p
      %b Venue:
      - if @conference.venue_url.present?
        = link_to @conference.venue, @conference.venue_url, target: '_blank'
      - else
        = @conference.venue
      - if @conference.location.present?
        &mdash;
        = location_with_non_us_country @conference, :full
    %p
      %b Program:
      - if @conference.program_url.present?
        = link_to icon('far', 'file', class: 'fa-fw'), @conference.program_url, target: '_blank'
      - else
        %i none
    - if can? :edit, Conference
      %p
        %b Data entry completed:
        = @conference.completed ? icon('fas', 'check', :class => 'fa-lg fa-fw text-success') : tag.i('not yet')
    %p
      %b Members Attending:
      = @conference.users.length
      - if @conference.users.length > 0 && current_user
        %span.ml-3
          = link_to icon('fas', 'users', class: 'fa-fw'), conference_users_path(conference_id: @conference.id)

- if can?(:edit, @conference) && @conference.editors_notes.present?
  .row
    .col-md-12
      %p
        %b Editor's Notes
        = @conference.editors_notes.try(:html_safe)

.row
  .col-md-12
    %p.form-actions
      .float-right
        - if can?(:destroy, @conference) && @presentations.empty?
          = link_to icon('far', 'trash-alt', '', class: 'fa-fw'), conference_path(@conference), :method => :delete, :class => "btn btn-danger", :data => { :confirm => 'Permanently remove this conference?' }, :post => true
      - if @conference.future? && @conference.registration_url.present?
        = link_to "Register", @conference.registration_url, :class => "btn btn-primary", target: '_blank'
      - if can? :create, Presentation
        = link_to "Add a Presentation", new_presentation_path(conference_id: @conference.id), :class => "btn btn-primary"
      - if can? :edit, @conference
        = link_to "Edit", edit_conference_path(@conference, nav_params), :class => "btn btn-primary"
      = link_to "Done", conferences_path(nav_params), :class => "btn btn-secondary"

.row
  .col-md-12
    %h4 Presentations
    - if @presentations.empty?
      %p None Yet
    - else
      %table.table
        = render :partial => "presentations/table_head"
        = render :partial => "presentations/presentation", :collection =>  @presentations
