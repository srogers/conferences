%nav.navbar.navbar-dark.bg-dark.navbar-expand-md
  .container
    = link_to 'OC', root_path, class: 'navbar-brand'
    %button.navbar-toggler{type:"button", 'data-toggle': "collapse", 'data-target': "#navbarSupportedContent"}
      %span.navbar-toggler-icon

    .collapse.navbar-collapse#navbarSupportedContent
      %ul.navbar-nav.mr-auto
        %li.nav-item= link_to 'Conferences', conferences_path, class: 'nav-link' + current_tab?('conferences')
        %li.nav-item= link_to 'Presentations', presentations_path, class: 'nav-link' + current_tab?('presentations')
        %li.nav-item= link_to 'Speakers', speakers_path, class: 'nav-link' + current_tab?('speakers')
        - if current_user&.admin?
          %li.nav-item= link_to 'Publications', publications_path, class: 'nav-link' + current_tab?('publications')
          %li.nav-item= link_to 'Orgs', organizers_path, class: 'nav-link' + current_tab?('organizers')
          %li.nav-item= link_to 'Docs', documents_path, class: 'nav-link' + current_tab?('documents')
          %li.nav-item= link_to 'Users', users_path, class: 'nav-link' + current_tab?('users')
          %li.nav-item= link_to 'Settings', settings_path, class: 'nav-link' + current_tab?('settings')
        - elsif current_user&.editor?
          %li.nav-item= link_to 'Publications', publications_path, class: 'nav-link' + current_tab?('publications')
          %li.nav-item= link_to 'Docs', documents_path, class: 'nav-link' + current_tab?('documents')
        - else
          -# Reader and Guest can see publications, since landing page links to it
          %li.nav-item= link_to 'Publications', publications_path, class: 'nav-link' + current_tab?('publications')


      %ul.navbar-nav.mr-auto.justify-content-end
        %li.nav-item= link_to "Us", about_path, class: 'nav-link' + current_tab?('about')
        - if current_user.present?
          %li.nav-item.dropdown{class: current_tab?('account')}
            = link_to('#', class: "nav-link dropdown-toggle", id: "navbarDropdownMenuLink", 'data-toggle' => "dropdown", 'aria-haspopup' => "true", 'aria-expanded' => "false") do
              You
            .dropdown-menu{'aria-labelledby' => "navbarDropdownMenuLink"}
              - if current_user.editor? || current_user.admin?
                = link_to "Your Stats",   summary_users_path(id: current_user.id), class: "dropdown-item" + current_tab?('summary')
              = link_to 'Profile',  account_path,       class: "dropdown-item" + current_tab?('profile')
              = link_to "Watch List",   user_presentations_path, class: "dropdown-item" + current_tab?('watchlist')
              = link_to "Conferences",  conferences_users_path,  class: "dropdown-item" + current_tab?('my_conferences')
              .dropdown-divider
              = link_to 'Logout',   logout_path,        class: "dropdown-item"
          %li.nav-item{style: 'background: white; height: 20px; margin-top: 8px;'}
            = image_tag current_user.photo.url, class: '', style: 'max-height: 30px; border: 2px solid white;'
        - else
          %li.nav-item= link_to 'Sign Up', new_user_path, class: 'nav-link' + current_tab?('signup')
          %li.nav-item= link_to 'Login', login_path, class: 'nav-link' + current_tab?('login')
