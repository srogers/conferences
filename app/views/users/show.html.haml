.row
  .col-md-6
    = title "#{ @user.name }"

  .col-md-6
    =image_tag @user.photo.url, class: 'float-right', style: 'max-height: 100px'

.row
  .col-md-10
    %table.clean-values
      %tr
        %th Name
        %td= @user.name

      %tr
        %th Email
        %td= mail_to(@user.email)

      %tr
        %th Role
        %td= t @user.role_name

      %tr
        %th Associated Speaker
        %td
          - if @user.speaker.present?
            = link_to @user.speaker.name, speaker_path(@user.speaker)
          - else
            %i not linked

      %tr
        %th Active
        %td
          - if @user.active?
            = icon 'fas', 'check', :class => 'fa-lg fa-fw text-success'
          - else
            = icon 'fas', 'ban', :class => 'fa-lg fa-fw text-danger'
            Disabled

      %tr
        %th Approved
        %td
          - if @user.approved?
            = icon 'fas', 'check', :class => 'fa-lg fa-fw text-success'
          - else
            = icon 'fas', 'ban', :class => 'fa-lg fa-fw text-danger'
            Needs Approval
      %tr
        %th City
        %td= @user.city

      %tr
        %th State
        %td= @user.state

      %tr
        %th Country
        %td= @user.country_name

      %tr
        %th Created at
        %td= pretty_date(@user.created_at, :style => :full, :undefined_text => '---')

      %tr
        %th Last Login At
        %td= pretty_date(@user.last_login_at, :style => :full, :undefined_text => '---')

      %tr
        %th Number of Times Logged in
        %td= @user.login_count

      %tr
        %th Number of Failed Login Attempts
        %td= @user.failed_login_count

      %tr
        %th Last request:
        %td= pretty_date current_user.last_request_at, style: :full

      %tr
        %th Current login IP:
        %td= current_user.current_login_ip

      %tr
        %th Last login IP:
        %td= current_user.last_login_ip

.row.form-actions
  .col-md-6
    = link_to "Done", users_path, :class => "btn btn-secondary"
    -# Don't allow editing an inactive user, because it will change the perishable_token and break the user's validation link
    = link_to "Edit", edit_user_path(@user), :class => "btn btn-primary" + (@user.active ? '' : ' disabled')
    = link_to "Summary", summary_users_path(id: @user.id), :class => "btn btn-primary"
  .col-md-6
    = link_to icon('far', 'trash-alt', 'Delete'), user_path(@user), :method => :delete, :class => "btn btn-danger", :data => { :confirm => 'Are you sure? This will assign user content to you.' }, :post => true
